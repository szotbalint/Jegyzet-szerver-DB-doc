<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Jegyzetszerver: Guzzle Upgrade Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Jegyzetszerver
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Guzzle Upgrade Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md91"></a>
3.6 to 3.7</h1>
<h2><a class="anchor" id="autotoc_md92"></a>
Deprecations</h2>
<ul>
<li>You can now enable E_USER_DEPRECATED warnings to see if you are using any deprecated methods.:</li>
</ul>
<div class="fragment"><div class="line"><a class="code" href="class_guzzle_1_1_common_1_1_version.html#a61b62707207cd4ee6051287e6bc9cdcf">\Guzzle\Common\Version::$emitWarnings</a> = <span class="keyword">true</span>;</div>
<div class="ttc" id="aclass_guzzle_1_1_common_1_1_version_html_a61b62707207cd4ee6051287e6bc9cdcf"><div class="ttname"><a href="class_guzzle_1_1_common_1_1_version.html#a61b62707207cd4ee6051287e6bc9cdcf">Guzzle\Common\Version\$emitWarnings</a></div><div class="ttdeci">static $emitWarnings</div><div class="ttdef"><b>Definition:</b> <a href="pixel_2shop_2vendor_2guzzle_2guzzle_2src_2_guzzle_2_common_2_version_8php_source.html#l00016">Version.php:16</a></div></div>
</div><!-- fragment --><p>The following APIs and options have been marked as deprecated:</p>
<ul>
<li>Marked <code>Guzzle\Http\Message\Request::isResponseBodyRepeatable()</code> as deprecated. Use <code>$request-&gt;getResponseBody()-&gt;isRepeatable()</code> instead.</li>
<li>Marked <code>Guzzle\Http\Message\Request::canCache()</code> as deprecated. Use <code>Guzzle\Plugin\Cache\DefaultCanCacheStrategy-&gt;canCacheRequest()</code> instead.</li>
<li>Marked <code>Guzzle\Http\Message\Request::canCache()</code> as deprecated. Use <code>Guzzle\Plugin\Cache\DefaultCanCacheStrategy-&gt;canCacheRequest()</code> instead.</li>
<li>Marked <code>Guzzle\Http\Message\Request::setIsRedirect()</code> as deprecated. Use the HistoryPlugin instead.</li>
<li>Marked <code>Guzzle\Http\Message\Request::isRedirect()</code> as deprecated. Use the HistoryPlugin instead.</li>
<li>Marked <code>Guzzle\Cache\CacheAdapterFactory::factory()</code> as deprecated</li>
<li>Marked <code>Guzzle\Service\Client::enableMagicMethods()</code> as deprecated. Magic methods can no longer be disabled on a Guzzle\Service\Client.</li>
<li>Marked <code>Guzzle\Parser\Url\UrlParser</code> as deprecated. Just use PHP's <code>parse_url()</code> and percent encode your UTF-8.</li>
<li>Marked <code>Guzzle\Common\Collection::inject()</code> as deprecated.</li>
<li>Marked <code>Guzzle\Plugin\CurlAuth\CurlAuthPlugin</code> as deprecated. Use &lsquo;$client-&gt;getConfig()-&gt;setPath('request.options/auth&rsquo;, array('user', 'pass', 'Basic|Digest|NTLM|Any'));<code>or </code>$client-&gt;setDefaultOption('auth', array('user', 'pass', 'Basic|Digest|NTLM|Any'));`</li>
</ul>
<p>3.7 introduces <code>request.options</code> as a parameter for a client configuration and as an optional argument to all creational request methods. When paired with a client's configuration settings, these options allow you to specify default settings for various aspects of a request. Because these options make other previous configuration options redundant, several configuration options and methods of a client and AbstractCommand have been deprecated.</p>
<ul>
<li>Marked <code>Guzzle\Service\Client::getDefaultHeaders()</code> as deprecated. Use &lsquo;$client-&gt;getDefaultOption('headers&rsquo;)<code>.</code></li>
<li><code>Marked</code>Guzzle\Service\Client::setDefaultHeaders()<code>as deprecated. Use</code>$client-&gt;setDefaultOption('headers/{header_name}', 'value')&lsquo;.</li>
<li>Marked 'request.params&rsquo; for <code>Guzzle\Http\Client</code> as deprecated. Use &lsquo;$client-&gt;setDefaultOption('params/{param_name}&rsquo;, 'value')&lsquo;</li>
<li>Marked 'command.headers&rsquo;, 'command.response_body' and 'command.on_complete' as deprecated for AbstractCommand. These will work through Guzzle 4.0 <pre class="fragment">  $command = $client-&gt;getCommand('foo', array(
      'command.headers' =&gt; array('Test' =&gt; '123'),
      'command.response_body' =&gt; '/path/to/file'
  ));

  // Should be changed to:

  $command = $client-&gt;getCommand('foo', array(
      'command.request_options' =&gt; array(
          'headers' =&gt; array('Test' =&gt; '123'),
          'save_as' =&gt; '/path/to/file'
      )
  ));
</pre> </li>
</ul>
<h2><a class="anchor" id="autotoc_md93"></a>
Interface changes</h2>
<p>Additions and changes (you will need to update any implementations or subclasses you may have created):</p>
<ul>
<li>Added an <code>$options</code> argument to the end of the following methods of <code>Guzzle\Http\ClientInterface</code>: createRequest, head, delete, put, patch, post, options, prepareRequest</li>
<li>Added an <code>$options</code> argument to the end of <code>Guzzle\Http\Message\Request\RequestFactoryInterface::createRequest()</code></li>
<li>Added an <code>applyOptions()</code> method to <code>Guzzle\Http\Message\Request\RequestFactoryInterface</code></li>
<li>Changed <code>Guzzle\Http\ClientInterface::get($uri = null, $headers = null, $body = null)</code> to <code>Guzzle\Http\ClientInterface::get($uri = null, $headers = null, $options = array())</code>. You can still pass in a resource, string, or EntityBody into the $options parameter to specify the download location of the response.</li>
<li>Changed <code>Guzzle\Common\Collection::__construct($data)</code> to no longer accepts a null value for <code>$data</code> but a default <code>array()</code></li>
<li>Added <code>Guzzle\Stream\StreamInterface::isRepeatable</code></li>
<li>Made <code>Guzzle\Http\Client::expandTemplate</code> and <code>getUriTemplate</code> protected methods.</li>
</ul>
<p>The following methods were removed from interfaces. All of these methods are still available in the concrete classes that implement them, but you should update your code to use alternative methods:</p>
<ul>
<li>Removed <code>Guzzle\Http\ClientInterface::setDefaultHeaders(). Use </code>$client-&gt;getConfig()-&gt;setPath('request.options/headers/{header_name}', 'value')<code>. or </code>$client-&gt;getConfig()-&gt;setPath('request.options/headers', array('header_name' =&gt; 'value'))<code>or </code>$client-&gt;setDefaultOption('headers/{header_name}', 'value')<code>. or </code>$client-&gt;setDefaultOption('headers', array('header_name' =&gt; 'value'))<code>.</code></li>
<li><code>Removed</code>Guzzle\Http\ClientInterface::getDefaultHeaders(). Use &lsquo;$client-&gt;getConfig()-&gt;getPath('request.options/headers&rsquo;)<code>.</code></li>
<li><code>Removed</code>Guzzle\Http\ClientInterface::expandTemplate()<code>. This is an implementation detail.</code></li>
<li><code>Removed</code>Guzzle\Http\ClientInterface::setRequestFactory()<code>. This is an implementation detail.</code></li>
<li><code>Removed</code>Guzzle\Http\ClientInterface::getCurlMulti()<code>. This is a very specific implementation detail.</code></li>
<li><code>Removed</code>Guzzle\Http\Message\RequestInterface::canCache&lt;tt&gt;. Use the CachePlugin.</li>
<li>RemovedGuzzle\Http\Message\RequestInterface::setIsRedirect&lt;tt&gt;. Use the HistoryPlugin.</li>
<li>RemovedGuzzle\Http\Message\RequestInterface::isRedirect`. Use the HistoryPlugin.</li>
</ul>
<h2><a class="anchor" id="autotoc_md94"></a>
Cache plugin breaking changes</h2>
<ul>
<li>CacheKeyProviderInterface and DefaultCacheKeyProvider are no longer used. All of this logic is handled in a CacheStorageInterface. These two objects and interface will be removed in a future version.</li>
<li>Always setting X-cache headers on cached responses</li>
<li>Default cache TTLs are now handled by the CacheStorageInterface of a CachePlugin</li>
<li><code>CacheStorageInterface::cache($key, Response $response, $ttl = null)</code> has changed to <code>cache(RequestInterface $request, Response $response);</code></li>
<li><code>CacheStorageInterface::fetch($key)</code> has changed to <code>fetch(RequestInterface $request);</code></li>
<li><code>CacheStorageInterface::delete($key)</code> has changed to <code>delete(RequestInterface $request);</code></li>
<li>Added <code>CacheStorageInterface::purge($url)</code></li>
<li><code>DefaultRevalidation::__construct(CacheKeyProviderInterface $cacheKey, CacheStorageInterface $cache, CachePlugin $plugin)</code> has changed to <code>DefaultRevalidation::__construct(CacheStorageInterface $cache, CanCacheStrategyInterface $canCache = null)</code></li>
<li>Added <code>RevalidationInterface::shouldRevalidate(RequestInterface $request, Response $response)</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md95"></a>
3.5 to 3.6</h1>
<ul>
<li>Mixed casing of headers are now forced to be a single consistent casing across all values for that header.</li>
<li>Messages internally use a HeaderCollection object to delegate handling case-insensitive header resolution</li>
<li>Removed the whole changedHeader() function system of messages because all header changes now go through addHeader(). For example, setHeader() first removes the header using unset on a HeaderCollection and then calls addHeader(). Keeping the Host header and URL host in sync is now handled by overriding the addHeader method in Request.</li>
<li>Specific header implementations can be created for complex headers. When a message creates a header, it uses a HeaderFactory which can map specific headers to specific header classes. There is now a Link header and CacheControl header implementation.</li>
<li>Moved getLinks() from Response to just be used on a Link header object.</li>
</ul>
<p>If you previously relied on Guzzle\Http\Message\Header::raw(), then you will need to update your code to use the HeaderInterface (e.g. toArray(), getAll(), etc).</p>
<h2><a class="anchor" id="autotoc_md96"></a>
Interface changes</h2>
<ul>
<li>Removed from interface: Guzzle\Http\ClientInterface::setUriTemplate</li>
<li>Removed from interface: Guzzle\Http\ClientInterface::setCurlMulti()</li>
<li>Removed Guzzle\Http\Message\Request::receivedRequestHeader() and implemented this functionality in Guzzle\Http\Curl\RequestMediator</li>
<li>Removed the optional $asString parameter from MessageInterface::getHeader(). Just cast the header to a string.</li>
<li>Removed the optional $tryChunkedTransfer option from Guzzle\Http\Message\EntityEnclosingRequestInterface</li>
<li>Removed the $asObjects argument from Guzzle\Http\Message\MessageInterface::getHeaders()</li>
</ul>
<h2><a class="anchor" id="autotoc_md97"></a>
Removed deprecated functions</h2>
<ul>
<li>Removed Guzzle\Parser\ParserRegister<a class="el" href="_service_locator_trait_8php.html#a1daf468da92d39bf50b3cf737cf8f32b">get()</a>. Use getParser()</li>
<li>Removed Guzzle\Parser\ParserRegister::set(). Use registerParser().</li>
</ul>
<h2><a class="anchor" id="autotoc_md98"></a>
Deprecations</h2>
<ul>
<li>The ability to case-insensitively search for header values</li>
<li>Guzzle\Http\Message\Header::hasExactHeader</li>
<li>Guzzle\Http\Message\Header::raw. Use getAll()</li>
<li>Deprecated cache control specific methods on Guzzle\Http\Message\AbstractMessage. Use the CacheControl header object instead.</li>
</ul>
<h2><a class="anchor" id="autotoc_md99"></a>
Other changes</h2>
<ul>
<li>All response header helper functions return a string rather than mixing Header objects and strings inconsistently</li>
<li>Removed cURL blacklist support. This is no longer necessary now that Expect, Accept, etc are managed by Guzzle directly via interfaces</li>
<li>Removed the injecting of a request object onto a response object. The methods to get and set a request still exist but are a no-op until removed.</li>
<li>Most classes that used to require a `<code>Guzzle\Service\Command\CommandInterface</code> typehint now request a <code>Guzzle\Service\Command\ArrayCommandInterface</code>.</li>
<li>Added <code>Guzzle\Http\Message\RequestInterface::startResponse()</code> to the RequestInterface to handle injecting a response on a request while the request is still being transferred</li>
<li><code>Guzzle\Service\Command\CommandInterface</code> now extends from ToArrayInterface and ArrayAccess</li>
</ul>
<h1><a class="anchor" id="autotoc_md100"></a>
3.3 to 3.4</h1>
<p>Base URLs of a client now follow the rules of <a href="http://tools.ietf.org/html/rfc3986#section-5.2.2">http://tools.ietf.org/html/rfc3986#section-5.2.2</a> when merging URLs.</p>
<h1><a class="anchor" id="autotoc_md101"></a>
3.2 to 3.3</h1>
<h2><a class="anchor" id="autotoc_md102"></a>
Response::getEtag() quote stripping removed</h2>
<p><code>Guzzle\Http\Message\Response::getEtag()</code> no longer strips quotes around the ETag response header</p>
<h2><a class="anchor" id="autotoc_md103"></a>
Removed &lt;tt&gt;Guzzle\Http\Utils&lt;/tt&gt;</h2>
<p>The <code>Guzzle\Http\Utils</code> class was removed. This class was only used for testing.</p>
<h2><a class="anchor" id="autotoc_md104"></a>
Stream wrapper and type</h2>
<p><code>Guzzle\Stream\Stream::getWrapper()</code> and <code>Guzzle\Stream\Stream::getSteamType()</code> are no longer converted to lowercase.</p>
<h2><a class="anchor" id="autotoc_md105"></a>
curl.emit_io became emit_io</h2>
<p>Emitting IO events from a RequestMediator is now a parameter that must be set in a request's curl options using the 'emit_io' key. This was previously set under a request's parameters using 'curl.emit_io'</p>
<h1><a class="anchor" id="autotoc_md106"></a>
3.1 to 3.2</h1>
<h2><a class="anchor" id="autotoc_md107"></a>
CurlMulti is no longer reused globally</h2>
<p>Before 3.2, the same CurlMulti object was reused globally for each client. This can cause issue where plugins added to a single client can pollute requests dispatched from other clients.</p>
<p>If you still wish to reuse the same CurlMulti object with each client, then you can add a listener to the ServiceBuilder's <code>service_builder.create_client</code> event to inject a custom CurlMulti object into each client as it is created.</p>
<div class="fragment"><div class="line">$multi = <span class="keyword">new</span> <a class="code" href="class_guzzle_1_1_http_1_1_curl_1_1_curl_multi.html">Guzzle\Http\Curl\CurlMulti</a>();</div>
<div class="line"><a class="code" href="pixel_2shop_2vendor_2guzzle_2guzzle_2tests_2bootstrap_8php.html#a03b3894f94a4a13f6de58cc6150584f3">$builder</a> = <a class="code" href="class_guzzle_1_1_service_1_1_builder_1_1_service_builder.html#a771996c4da90fe20a6092d546207dc38">Guzzle\Service\Builder\ServiceBuilder::factory</a>(<span class="stringliteral">&#39;/path/to/config.json&#39;</span>);</div>
<div class="line"><a class="code" href="pixel_2shop_2vendor_2guzzle_2guzzle_2tests_2bootstrap_8php.html#a03b3894f94a4a13f6de58cc6150584f3">$builder</a>-&gt;addListener(<span class="stringliteral">&#39;service_builder.create_client&#39;</span>, <span class="keyword">function</span> ($event) use ($multi) {</div>
<div class="line">    $event[<span class="stringliteral">&#39;client&#39;</span>]-&gt;setCurlMulti($multi);</div>
<div class="line">}</div>
<div class="line">});</div>
<div class="ttc" id="aclass_guzzle_1_1_http_1_1_curl_1_1_curl_multi_html"><div class="ttname"><a href="class_guzzle_1_1_http_1_1_curl_1_1_curl_multi.html">Guzzle\Http\Curl\CurlMulti</a></div><div class="ttdef"><b>Definition:</b> <a href="_curl_multi_8php_source.html#l00016">CurlMulti.php:17</a></div></div>
<div class="ttc" id="aclass_guzzle_1_1_service_1_1_builder_1_1_service_builder_html_a771996c4da90fe20a6092d546207dc38"><div class="ttname"><a href="class_guzzle_1_1_service_1_1_builder_1_1_service_builder.html#a771996c4da90fe20a6092d546207dc38">Guzzle\Service\Builder\ServiceBuilder\factory</a></div><div class="ttdeci">static factory($config=null, array $globalParameters=array())</div><div class="ttdef"><b>Definition:</b> <a href="_service_builder_8php_source.html#l00041">ServiceBuilder.php:41</a></div></div>
<div class="ttc" id="apixel_2shop_2vendor_2guzzle_2guzzle_2tests_2bootstrap_8php_html_a03b3894f94a4a13f6de58cc6150584f3"><div class="ttname"><a href="pixel_2shop_2vendor_2guzzle_2guzzle_2tests_2bootstrap_8php.html#a03b3894f94a4a13f6de58cc6150584f3">$builder</a></div><div class="ttdeci">$builder</div><div class="ttdef"><b>Definition:</b> <a href="pixel_2shop_2vendor_2guzzle_2guzzle_2tests_2bootstrap_8php_source.html#l00009">bootstrap.php:9</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md108"></a>
No default path</h2>
<p>URLs no longer have a default path value of '/' if no path was specified.</p>
<p>Before:</p>
<div class="fragment"><div class="line">$request = $client-&gt;get(<span class="stringliteral">&#39;http://www.foo.com&#39;</span>);</div>
<div class="line">echo $request-&gt;getUrl();</div>
<div class="line"><span class="comment">// &gt;&gt; http://www.foo.com/</span></div>
</div><!-- fragment --><p>After:</p>
<div class="fragment"><div class="line">$request = $client-&gt;get(<span class="stringliteral">&#39;http://www.foo.com&#39;</span>);</div>
<div class="line">echo $request-&gt;getUrl();</div>
<div class="line"><span class="comment">// &gt;&gt; http://www.foo.com</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md109"></a>
Less verbose BadResponseException</h2>
<p>The exception message for <code>Guzzle\Http\Exception\BadResponseException</code> no longer contains the full HTTP request and response information. You can, however, get access to the request and response object by calling <code>getRequest()</code> or <code>getResponse()</code> on the exception object.</p>
<h2><a class="anchor" id="autotoc_md110"></a>
Query parameter aggregation</h2>
<p>Multi-valued query parameters are no longer aggregated using a callback function. <code>Guzzle\Http\Query</code> now has a setAggregator() method that accepts a <code>Guzzle\Http\QueryAggregator\QueryAggregatorInterface</code> object. This object is responsible for handling the aggregation of multi-valued query string variables into a flattened hash.</p>
<h1><a class="anchor" id="autotoc_md111"></a>
2.8 to 3.x</h1>
<h2><a class="anchor" id="autotoc_md112"></a>
Guzzle\Service\Inspector</h2>
<p>Change <code>\Guzzle\Service\Inspector::fromConfig</code> to <code>\Guzzle\Common\Collection::fromConfig</code></p>
<p><b>Before</b></p>
<div class="fragment"><div class="line">use Guzzle\Service\Inspector;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>YourClient <span class="keyword">extends</span> <a class="code" href="class_guzzle_1_1_service_1_1_client.html">\Guzzle\Service\Client</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> factory(<a class="code" href="build_8php.html#ac2b0b6b8a20296c9480c23c5b4348ee6">$config</a> = array())</div>
<div class="line">    {</div>
<div class="line">        $default = array();</div>
<div class="line">        $required = array(<span class="stringliteral">&#39;base_url&#39;</span>, <span class="stringliteral">&#39;username&#39;</span>, <span class="stringliteral">&#39;api_key&#39;</span>);</div>
<div class="line">        <a class="code" href="build_8php.html#ac2b0b6b8a20296c9480c23c5b4348ee6">$config</a> = Inspector::fromConfig(<a class="code" href="build_8php.html#ac2b0b6b8a20296c9480c23c5b4348ee6">$config</a>, $default, $required);</div>
<div class="line"> </div>
<div class="line">        $client = <span class="keyword">new</span> <span class="keyword">self</span>(</div>
<div class="line">            <a class="code" href="build_8php.html#ac2b0b6b8a20296c9480c23c5b4348ee6">$config</a>-&gt;get(<span class="stringliteral">&#39;base_url&#39;</span>),</div>
<div class="line">            <a class="code" href="build_8php.html#ac2b0b6b8a20296c9480c23c5b4348ee6">$config</a>-&gt;get(<span class="stringliteral">&#39;username&#39;</span>),</div>
<div class="line">            <a class="code" href="build_8php.html#ac2b0b6b8a20296c9480c23c5b4348ee6">$config</a>-&gt;get(<span class="stringliteral">&#39;api_key&#39;</span>)</div>
<div class="line">        );</div>
<div class="line">        $client-&gt;setConfig(<a class="code" href="build_8php.html#ac2b0b6b8a20296c9480c23c5b4348ee6">$config</a>);</div>
<div class="line"> </div>
<div class="line">        $client-&gt;setDescription(ServiceDescription::factory(__DIR__ . DIRECTORY_SEPARATOR . <span class="stringliteral">&#39;client.json&#39;</span>));</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> $client;</div>
<div class="line">    }</div>
<div class="ttc" id="abuild_8php_html_ac2b0b6b8a20296c9480c23c5b4348ee6"><div class="ttname"><a href="build_8php.html#ac2b0b6b8a20296c9480c23c5b4348ee6">$config</a></div><div class="ttdeci">if($returnStatus !==0) if($autoload) $config</div><div class="ttdef"><b>Definition:</b> <a href="build_8php_source.html#l00032">build.php:32</a></div></div>
<div class="ttc" id="aclass_guzzle_1_1_service_1_1_client_html"><div class="ttname"><a href="class_guzzle_1_1_service_1_1_client.html">Guzzle\Service\Client</a></div><div class="ttdef"><b>Definition:</b> <a href="pixel_2shop_2vendor_2guzzle_2guzzle_2src_2_guzzle_2_service_2_client_8php_source.html#l00025">Client.php:26</a></div></div>
</div><!-- fragment --><p><b>After</b></p>
<div class="fragment"><div class="line">use <a class="code" href="class_guzzle_1_1_common_1_1_collection.html">Guzzle\Common\Collection</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>YourClient <span class="keyword">extends</span> <a class="code" href="class_guzzle_1_1_service_1_1_client.html">\Guzzle\Service\Client</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> factory(<a class="code" href="build_8php.html#ac2b0b6b8a20296c9480c23c5b4348ee6">$config</a> = array())</div>
<div class="line">    {</div>
<div class="line">        $default = array();</div>
<div class="line">        $required = array(<span class="stringliteral">&#39;base_url&#39;</span>, <span class="stringliteral">&#39;username&#39;</span>, <span class="stringliteral">&#39;api_key&#39;</span>);</div>
<div class="line">        <a class="code" href="build_8php.html#ac2b0b6b8a20296c9480c23c5b4348ee6">$config</a> = Collection::fromConfig(<a class="code" href="build_8php.html#ac2b0b6b8a20296c9480c23c5b4348ee6">$config</a>, $default, $required);</div>
<div class="line"> </div>
<div class="line">        $client = <span class="keyword">new</span> <span class="keyword">self</span>(</div>
<div class="line">            <a class="code" href="build_8php.html#ac2b0b6b8a20296c9480c23c5b4348ee6">$config</a>-&gt;get(<span class="stringliteral">&#39;base_url&#39;</span>),</div>
<div class="line">            <a class="code" href="build_8php.html#ac2b0b6b8a20296c9480c23c5b4348ee6">$config</a>-&gt;get(<span class="stringliteral">&#39;username&#39;</span>),</div>
<div class="line">            <a class="code" href="build_8php.html#ac2b0b6b8a20296c9480c23c5b4348ee6">$config</a>-&gt;get(<span class="stringliteral">&#39;api_key&#39;</span>)</div>
<div class="line">        );</div>
<div class="line">        $client-&gt;setConfig(<a class="code" href="build_8php.html#ac2b0b6b8a20296c9480c23c5b4348ee6">$config</a>);</div>
<div class="line"> </div>
<div class="line">        $client-&gt;setDescription(ServiceDescription::factory(__DIR__ . DIRECTORY_SEPARATOR . <span class="stringliteral">&#39;client.json&#39;</span>));</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> $client;</div>
<div class="line">    }</div>
<div class="ttc" id="aclass_guzzle_1_1_common_1_1_collection_html"><div class="ttname"><a href="class_guzzle_1_1_common_1_1_collection.html">Guzzle\Common\Collection</a></div><div class="ttdef"><b>Definition:</b> <a href="guzzle_2guzzle_2src_2_guzzle_2_common_2_collection_8php_source.html#l00011">Collection.php:12</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md113"></a>
Convert XML Service Descriptions to JSON</h2>
<p><b>Before</b></p>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">client</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">commands</span>&gt;</div>
<div class="line">        <span class="comment">&lt;!-- Groups --&gt;</span></div>
<div class="line">        &lt;<span class="keywordtype">command</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;list_groups&quot;</span> <span class="keyword">method</span>=<span class="stringliteral">&quot;GET&quot;</span> <span class="keyword">uri</span>=<span class="stringliteral">&quot;groups.json&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">doc</span>&gt;<span class="keyword">Get</span> <span class="keyword">a</span> <span class="keyword">list</span> <span class="keyword">of</span> <span class="keyword">groups</span>&lt;/<span class="keywordtype">doc</span>&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">command</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">command</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;search_groups&quot;</span> <span class="keyword">method</span>=<span class="stringliteral">&quot;GET&quot;</span> <span class="keyword">uri</span>=<span class="stringliteral">&#39;search.json?query=&quot;{{query}} type:group&quot;&#39;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">doc</span>&gt;<span class="keyword">Uses</span> <span class="keyword">a</span> <span class="keyword">search</span> <span class="keyword">query</span> <span class="keyword">to</span> <span class="keyword">get</span> <span class="keyword">a</span> <span class="keyword">list</span> <span class="keyword">of</span> <span class="keyword">groups</span>&lt;/<span class="keywordtype">doc</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;query&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;string&quot;</span> <span class="keyword">required</span>=<span class="stringliteral">&quot;true&quot;</span> /&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">command</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">command</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;create_group&quot;</span> <span class="keyword">method</span>=<span class="stringliteral">&quot;POST&quot;</span> <span class="keyword">uri</span>=<span class="stringliteral">&quot;groups.json&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">doc</span>&gt;<span class="keyword">Create</span> <span class="keyword">a</span> <span class="keyword">group</span>&lt;/<span class="keywordtype">doc</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;data&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;array&quot;</span> <span class="keyword">location</span>=<span class="stringliteral">&quot;body&quot;</span> <span class="keyword">filters</span>=<span class="stringliteral">&quot;json_encode&quot;</span> <span class="keyword">doc</span>=<span class="stringliteral">&quot;Group JSON&quot;</span>/&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Content-Type&quot;</span> <span class="keyword">location</span>=<span class="stringliteral">&quot;header&quot;</span> <span class="keyword">static</span>=<span class="stringliteral">&quot;application/json&quot;</span>/&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">command</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">command</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;delete_group&quot;</span> <span class="keyword">method</span>=<span class="stringliteral">&quot;DELETE&quot;</span> <span class="keyword">uri</span>=<span class="stringliteral">&quot;groups/{{id}}.json&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">doc</span>&gt;<span class="keyword">Delete</span> <span class="keyword">a</span> <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">ID</span>&lt;/<span class="keywordtype">doc</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;id&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;integer&quot;</span> <span class="keyword">required</span>=<span class="stringliteral">&quot;true&quot;</span>/&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">command</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">command</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;get_group&quot;</span> <span class="keyword">method</span>=<span class="stringliteral">&quot;GET&quot;</span> <span class="keyword">uri</span>=<span class="stringliteral">&quot;groups/{{id}}.json&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;id&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;integer&quot;</span> <span class="keyword">required</span>=<span class="stringliteral">&quot;true&quot;</span>/&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">command</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">command</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;update_group&quot;</span> <span class="keyword">method</span>=<span class="stringliteral">&quot;PUT&quot;</span> <span class="keyword">uri</span>=<span class="stringliteral">&quot;groups/{{id}}.json&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">doc</span>&gt;<span class="keyword">Update</span> <span class="keyword">a</span> <span class="keyword">group</span>&lt;/<span class="keywordtype">doc</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;id&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;integer&quot;</span> <span class="keyword">required</span>=<span class="stringliteral">&quot;true&quot;</span>/&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;data&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;array&quot;</span> <span class="keyword">location</span>=<span class="stringliteral">&quot;body&quot;</span> <span class="keyword">filters</span>=<span class="stringliteral">&quot;json_encode&quot;</span> <span class="keyword">doc</span>=<span class="stringliteral">&quot;Group JSON&quot;</span>/&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Content-Type&quot;</span> <span class="keyword">location</span>=<span class="stringliteral">&quot;header&quot;</span> <span class="keyword">static</span>=<span class="stringliteral">&quot;application/json&quot;</span>/&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">command</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">commands</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">client</span>&gt;</div>
</div><!-- fragment --><p><b>After</b></p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;name&quot;:       &quot;Zendesk REST API v2&quot;,</div>
<div class="line">    &quot;apiVersion&quot;: &quot;2012-12-31&quot;,</div>
<div class="line">    &quot;description&quot;:&quot;Provides access to Zendesk views, groups, tickets, ticket fields, and users&quot;,</div>
<div class="line">    &quot;operations&quot;: {</div>
<div class="line">        &quot;list_groups&quot;:  {</div>
<div class="line">            &quot;httpMethod&quot;:&quot;GET&quot;,</div>
<div class="line">            &quot;uri&quot;:       &quot;groups.json&quot;,</div>
<div class="line">            &quot;summary&quot;:   &quot;Get a list of groups&quot;</div>
<div class="line">        },</div>
<div class="line">        &quot;search_groups&quot;:{</div>
<div class="line">            &quot;httpMethod&quot;:&quot;GET&quot;,</div>
<div class="line">            &quot;uri&quot;:       &quot;search.json?query=\&quot;{query} type:group\&quot;&quot;,</div>
<div class="line">            &quot;summary&quot;:   &quot;Uses a search query to get a list of groups&quot;,</div>
<div class="line">            &quot;parameters&quot;:{</div>
<div class="line">                &quot;query&quot;:{</div>
<div class="line">                    &quot;location&quot;:   &quot;uri&quot;,</div>
<div class="line">                    &quot;description&quot;:&quot;Zendesk Search Query&quot;,</div>
<div class="line">                    &quot;type&quot;:       &quot;string&quot;,</div>
<div class="line">                    &quot;required&quot;:   true</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        },</div>
<div class="line">        &quot;create_group&quot;: {</div>
<div class="line">            &quot;httpMethod&quot;:&quot;POST&quot;,</div>
<div class="line">            &quot;uri&quot;:       &quot;groups.json&quot;,</div>
<div class="line">            &quot;summary&quot;:   &quot;Create a group&quot;,</div>
<div class="line">            &quot;parameters&quot;:{</div>
<div class="line">                &quot;data&quot;:        {</div>
<div class="line">                    &quot;type&quot;:       &quot;array&quot;,</div>
<div class="line">                    &quot;location&quot;:   &quot;body&quot;,</div>
<div class="line">                    &quot;description&quot;:&quot;Group JSON&quot;,</div>
<div class="line">                    &quot;filters&quot;:    &quot;json_encode&quot;,</div>
<div class="line">                    &quot;required&quot;:   true</div>
<div class="line">                },</div>
<div class="line">                &quot;Content-Type&quot;:{</div>
<div class="line">                    &quot;type&quot;:    &quot;string&quot;,</div>
<div class="line">                    &quot;location&quot;:&quot;header&quot;,</div>
<div class="line">                    &quot;static&quot;:  &quot;application/json&quot;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        },</div>
<div class="line">        &quot;delete_group&quot;: {</div>
<div class="line">            &quot;httpMethod&quot;:&quot;DELETE&quot;,</div>
<div class="line">            &quot;uri&quot;:       &quot;groups/{id}.json&quot;,</div>
<div class="line">            &quot;summary&quot;:   &quot;Delete a group&quot;,</div>
<div class="line">            &quot;parameters&quot;:{</div>
<div class="line">                &quot;id&quot;:{</div>
<div class="line">                    &quot;location&quot;:   &quot;uri&quot;,</div>
<div class="line">                    &quot;description&quot;:&quot;Group to delete by ID&quot;,</div>
<div class="line">                    &quot;type&quot;:       &quot;integer&quot;,</div>
<div class="line">                    &quot;required&quot;:   true</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        },</div>
<div class="line">        &quot;get_group&quot;:    {</div>
<div class="line">            &quot;httpMethod&quot;:&quot;GET&quot;,</div>
<div class="line">            &quot;uri&quot;:       &quot;groups/{id}.json&quot;,</div>
<div class="line">            &quot;summary&quot;:   &quot;Get a ticket&quot;,</div>
<div class="line">            &quot;parameters&quot;:{</div>
<div class="line">                &quot;id&quot;:{</div>
<div class="line">                    &quot;location&quot;:   &quot;uri&quot;,</div>
<div class="line">                    &quot;description&quot;:&quot;Group to get by ID&quot;,</div>
<div class="line">                    &quot;type&quot;:       &quot;integer&quot;,</div>
<div class="line">                    &quot;required&quot;:   true</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        },</div>
<div class="line">        &quot;update_group&quot;: {</div>
<div class="line">            &quot;httpMethod&quot;:&quot;PUT&quot;,</div>
<div class="line">            &quot;uri&quot;:       &quot;groups/{id}.json&quot;,</div>
<div class="line">            &quot;summary&quot;:   &quot;Update a group&quot;,</div>
<div class="line">            &quot;parameters&quot;:{</div>
<div class="line">                &quot;id&quot;:          {</div>
<div class="line">                    &quot;location&quot;:   &quot;uri&quot;,</div>
<div class="line">                    &quot;description&quot;:&quot;Group to update by ID&quot;,</div>
<div class="line">                    &quot;type&quot;:       &quot;integer&quot;,</div>
<div class="line">                    &quot;required&quot;:   true</div>
<div class="line">                },</div>
<div class="line">                &quot;data&quot;:        {</div>
<div class="line">                    &quot;type&quot;:       &quot;array&quot;,</div>
<div class="line">                    &quot;location&quot;:   &quot;body&quot;,</div>
<div class="line">                    &quot;description&quot;:&quot;Group JSON&quot;,</div>
<div class="line">                    &quot;filters&quot;:    &quot;json_encode&quot;,</div>
<div class="line">                    &quot;required&quot;:   true</div>
<div class="line">                },</div>
<div class="line">                &quot;Content-Type&quot;:{</div>
<div class="line">                    &quot;type&quot;:    &quot;string&quot;,</div>
<div class="line">                    &quot;location&quot;:&quot;header&quot;,</div>
<div class="line">                    &quot;static&quot;:  &quot;application/json&quot;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md114"></a>
Guzzle\Service\Description\ServiceDescription</h2>
<p>Commands are now called Operations</p>
<p><b>Before</b></p>
<div class="fragment"><div class="line">use <a class="code" href="class_guzzle_1_1_service_1_1_description_1_1_service_description.html">Guzzle\Service\Description\ServiceDescription</a>;</div>
<div class="line"> </div>
<div class="line">$sd = <span class="keyword">new</span> ServiceDescription();</div>
<div class="line">$sd-&gt;getCommands();     <span class="comment">// @returns ApiCommandInterface[]</span></div>
<div class="line">$sd-&gt;hasCommand($name);</div>
<div class="line">$sd-&gt;getCommand($name); <span class="comment">// @returns ApiCommandInterface|null</span></div>
<div class="line">$sd-&gt;addCommand($command); <span class="comment">// @param ApiCommandInterface $command</span></div>
<div class="ttc" id="aclass_guzzle_1_1_service_1_1_description_1_1_service_description_html"><div class="ttname"><a href="class_guzzle_1_1_service_1_1_description_1_1_service_description.html">Guzzle\Service\Description\ServiceDescription</a></div><div class="ttdef"><b>Definition:</b> <a href="_service_description_8php_source.html#l00011">ServiceDescription.php:12</a></div></div>
</div><!-- fragment --><p><b>After</b></p>
<div class="fragment"><div class="line">use <a class="code" href="class_guzzle_1_1_service_1_1_description_1_1_service_description.html">Guzzle\Service\Description\ServiceDescription</a>;</div>
<div class="line"> </div>
<div class="line">$sd = <span class="keyword">new</span> ServiceDescription();</div>
<div class="line">$sd-&gt;getOperations();           <span class="comment">// @returns OperationInterface[]</span></div>
<div class="line">$sd-&gt;hasOperation($name);</div>
<div class="line">$sd-&gt;getOperation($name);       <span class="comment">// @returns OperationInterface|null</span></div>
<div class="line">$sd-&gt;addOperation($operation);  <span class="comment">// @param OperationInterface $operation</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md115"></a>
Guzzle\Common\Inflection\Inflector</h2>
<p>Namespace is now <code>Guzzle\Inflection\Inflector</code></p>
<h2><a class="anchor" id="autotoc_md116"></a>
Guzzle\Http\Plugin</h2>
<p>Namespace is now <code>Guzzle\Plugin</code>. Many other changes occur within this namespace and are detailed in their own sections below.</p>
<h2><a class="anchor" id="autotoc_md117"></a>
Guzzle\Http\Plugin\LogPlugin and Guzzle\Common\Log</h2>
<p>Now <code>Guzzle\Plugin\Log\LogPlugin</code> and <code>Guzzle\Log</code> respectively.</p>
<p><b>Before</b></p>
<div class="fragment"><div class="line">use Guzzle\Common\Log\ClosureLogAdapter;</div>
<div class="line">use Guzzle\Http\Plugin\LogPlugin;</div>
<div class="line"> </div>
<div class="line">$client;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// $verbosity is an integer indicating desired message verbosity level</span></div>
<div class="line">$client-&gt;addSubscriber(<span class="keyword">new</span> LogPlugin(<span class="keyword">new</span> ClosureLogAdapter(<span class="keyword">function</span>($m) { echo $m; }, $verbosity = LogPlugin::LOG_VERBOSE);</div>
</div><!-- fragment --><p><b>After</b></p>
<div class="fragment"><div class="line">use <a class="code" href="class_guzzle_1_1_log_1_1_closure_log_adapter.html">Guzzle\Log\ClosureLogAdapter</a>;</div>
<div class="line">use <a class="code" href="class_guzzle_1_1_log_1_1_message_formatter.html">Guzzle\Log\MessageFormatter</a>;</div>
<div class="line">use <a class="code" href="class_guzzle_1_1_plugin_1_1_log_1_1_log_plugin.html">Guzzle\Plugin\Log\LogPlugin</a>;</div>
<div class="line"> </div>
<div class="line">$client;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// $format is a string indicating desired message format -- @see MessageFormatter</span></div>
<div class="line">$client-&gt;addSubscriber(<span class="keyword">new</span> LogPlugin(<span class="keyword">new</span> ClosureLogAdapter(<span class="keyword">function</span>($m) { echo $m; }, $format = MessageFormatter::DEBUG_FORMAT);</div>
<div class="ttc" id="aclass_guzzle_1_1_log_1_1_closure_log_adapter_html"><div class="ttname"><a href="class_guzzle_1_1_log_1_1_closure_log_adapter.html">Guzzle\Log\ClosureLogAdapter</a></div><div class="ttdef"><b>Definition:</b> <a href="_closure_log_adapter_8php_source.html#l00008">ClosureLogAdapter.php:9</a></div></div>
<div class="ttc" id="aclass_guzzle_1_1_log_1_1_message_formatter_html"><div class="ttname"><a href="class_guzzle_1_1_log_1_1_message_formatter.html">Guzzle\Log\MessageFormatter</a></div><div class="ttdef"><b>Definition:</b> <a href="_message_formatter_8php_source.html#l00039">MessageFormatter.php:40</a></div></div>
<div class="ttc" id="aclass_guzzle_1_1_plugin_1_1_log_1_1_log_plugin_html"><div class="ttname"><a href="class_guzzle_1_1_plugin_1_1_log_1_1_log_plugin.html">Guzzle\Plugin\Log\LogPlugin</a></div><div class="ttdef"><b>Definition:</b> <a href="_log_plugin_8php_source.html#l00020">LogPlugin.php:21</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md118"></a>
Guzzle\Http\Plugin\CurlAuthPlugin</h2>
<p>Now <code>Guzzle\Plugin\CurlAuth\CurlAuthPlugin</code>.</p>
<h2><a class="anchor" id="autotoc_md119"></a>
Guzzle\Http\Plugin\ExponentialBackoffPlugin</h2>
<p>Now <code>Guzzle\Plugin\Backoff\BackoffPlugin</code>, and other changes.</p>
<p><b>Before</b></p>
<div class="fragment"><div class="line">use Guzzle\Http\Plugin\ExponentialBackoffPlugin;</div>
<div class="line"> </div>
<div class="line">$backoffPlugin = <span class="keyword">new</span> ExponentialBackoffPlugin($maxRetries, array_merge(</div>
<div class="line">        ExponentialBackoffPlugin::getDefaultFailureCodes(), array(429)</div>
<div class="line">    ));</div>
<div class="line"> </div>
<div class="line">$client-&gt;addSubscriber($backoffPlugin);</div>
</div><!-- fragment --><p><b>After</b></p>
<div class="fragment"><div class="line">use <a class="code" href="class_guzzle_1_1_plugin_1_1_backoff_1_1_backoff_plugin.html">Guzzle\Plugin\Backoff\BackoffPlugin</a>;</div>
<div class="line">use <a class="code" href="class_guzzle_1_1_plugin_1_1_backoff_1_1_http_backoff_strategy.html">Guzzle\Plugin\Backoff\HttpBackoffStrategy</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Use convenient factory method instead -- see implementation for ideas of what</span></div>
<div class="line"><span class="comment">// you can do with chaining backoff strategies</span></div>
<div class="line">$backoffPlugin = BackoffPlugin::getExponentialBackoff($maxRetries, array_merge(</div>
<div class="line">        HttpBackoffStrategy::getDefaultFailureCodes(), array(429)</div>
<div class="line">    ));</div>
<div class="line">$client-&gt;addSubscriber($backoffPlugin);</div>
<div class="ttc" id="aclass_guzzle_1_1_plugin_1_1_backoff_1_1_backoff_plugin_html"><div class="ttname"><a href="class_guzzle_1_1_plugin_1_1_backoff_1_1_backoff_plugin.html">Guzzle\Plugin\Backoff\BackoffPlugin</a></div><div class="ttdef"><b>Definition:</b> <a href="_backoff_plugin_8php_source.html#l00016">BackoffPlugin.php:17</a></div></div>
<div class="ttc" id="aclass_guzzle_1_1_plugin_1_1_backoff_1_1_http_backoff_strategy_html"><div class="ttname"><a href="class_guzzle_1_1_plugin_1_1_backoff_1_1_http_backoff_strategy.html">Guzzle\Plugin\Backoff\HttpBackoffStrategy</a></div><div class="ttdef"><b>Definition:</b> <a href="_http_backoff_strategy_8php_source.html#l00014">HttpBackoffStrategy.php:15</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md120"></a>
Known Issues</h2>
<h3><a class="anchor" id="autotoc_md121"></a>
[BUG] Accept-Encoding header behavior changed unintentionally.</h3>
<p>(See #217) (Fixed in 09daeb8c666fb44499a0646d655a8ae36456575e)</p>
<p>In version 2.8 setting the <code>Accept-Encoding</code> header would set the CURLOPT_ENCODING option, which permitted cURL to properly handle gzip/deflate compressed responses from the server. In versions affected by this bug this does not happen. See issue #217 for a workaround, or use a version containing the fix. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
