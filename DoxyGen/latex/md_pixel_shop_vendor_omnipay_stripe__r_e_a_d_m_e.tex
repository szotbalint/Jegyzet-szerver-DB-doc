{\bfseries{\mbox{\hyperlink{namespace_stripe}{Stripe}} driver for the Omnipay PHP payment processing library}}

\href{https://travis-ci.org/thephpleague/omnipay-stripe}{\texttt{ }} \href{https://packagist.org/packages/omnipay/stripe}{\texttt{ }} \href{https://packagist.org/packages/omnipay/stripe}{\texttt{ }}

\href{https://github.com/thephpleague/omnipay}{\texttt{ Omnipay}} is a framework agnostic, multi-\/gateway payment processing library for PHP 5.\+3+. This package implements \mbox{\hyperlink{namespace_stripe}{Stripe}} support for Omnipay.\hypertarget{md_pixel_shop_vendor_omnipay_stripe__r_e_a_d_m_e_autotoc_md200}{}\doxysection{Installation}\label{md_pixel_shop_vendor_omnipay_stripe__r_e_a_d_m_e_autotoc_md200}
Omnipay is installed via \href{http://getcomposer.org/}{\texttt{ Composer}}. To install, simply add it to your {\ttfamily composer.\+json} file\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{    "{}require"{}: \{}
\DoxyCodeLine{        "{}omnipay/stripe"{}: "{}\string~2.0"{}}
\DoxyCodeLine{    \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


And run composer to update your dependencies\+: \begin{DoxyVerb}$ curl -s http://getcomposer.org/installer | php
$ php composer.phar update
\end{DoxyVerb}
 \hypertarget{md_pixel_shop_vendor_omnipay_stripe__r_e_a_d_m_e_autotoc_md201}{}\doxysection{Basic Usage}\label{md_pixel_shop_vendor_omnipay_stripe__r_e_a_d_m_e_autotoc_md201}
The following gateways are provided by this package\+:


\begin{DoxyItemize}
\item \href{https://stripe.com/}{\texttt{ Stripe}}
\end{DoxyItemize}

For general usage instructions, please see the main \href{https://github.com/thephpleague/omnipay}{\texttt{ Omnipay}} repository.\hypertarget{md_pixel_shop_vendor_omnipay_stripe__r_e_a_d_m_e_autotoc_md202}{}\doxysubsection{Stripe.\+js}\label{md_pixel_shop_vendor_omnipay_stripe__r_e_a_d_m_e_autotoc_md202}
The \mbox{\hyperlink{namespace_stripe}{Stripe}} integration is fairly straight forward. Essentially you just pass a {\ttfamily token} field through to \mbox{\hyperlink{namespace_stripe}{Stripe}} instead of the regular credit card data.

Start by following the standard \mbox{\hyperlink{namespace_stripe}{Stripe}} JS guide here\+: \href{https://stripe.com/docs/tutorials/forms}{\texttt{ https\+://stripe.\+com/docs/tutorials/forms}}

After that you will have a {\ttfamily stripe\+Token} field which will be submitted to your server. Simply pass this through to the gateway as {\ttfamily token}, instead of the usual {\ttfamily card} array\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$token = \$\_POST[\textcolor{stringliteral}{'stripeToken'}];}
\DoxyCodeLine{}
\DoxyCodeLine{\$response = \$gateway-\/>purchase([}
\DoxyCodeLine{    \textcolor{stringliteral}{'amount'} => \textcolor{stringliteral}{'10.00'},}
\DoxyCodeLine{    \textcolor{stringliteral}{'currency'} => \textcolor{stringliteral}{'USD'},}
\DoxyCodeLine{    \textcolor{stringliteral}{'token'} => \$token,}
\DoxyCodeLine{])-\/>send();}

\end{DoxyCode}
\hypertarget{md_pixel_shop_vendor_omnipay_stripe__r_e_a_d_m_e_autotoc_md203}{}\doxysubsection{Stripe Connect}\label{md_pixel_shop_vendor_omnipay_stripe__r_e_a_d_m_e_autotoc_md203}
\mbox{\hyperlink{namespace_stripe}{Stripe}} connect applications can charge an additional fee on top of \mbox{\hyperlink{namespace_stripe}{Stripe}}\textquotesingle{}s fees for charges they make on behalf of their users. To do this you need to specify an additional {\ttfamily transaction\+Fee} parameter as part of an authorize or purchase request.

When a charge is refunded the transaction fee is refunded with an amount proportional to the amount of the charge refunded and by default this will come from your connected user\textquotesingle{}s \mbox{\hyperlink{namespace_stripe}{Stripe}} account effectively leaving them out of pocket. To refund from your (the applications) \mbox{\hyperlink{namespace_stripe}{Stripe}} account instead you can pass a {\ttfamily refund\+Application\+Fee} parameter with a boolean value of true as part of a refund request.

Note\+: making requests with \mbox{\hyperlink{namespace_stripe}{Stripe}} Connect specific parameters can only be made using the OAuth access token you received as part of the authorization process. Read more on \mbox{\hyperlink{namespace_stripe}{Stripe}} Connect \href{https://stripe.com/docs/connect}{\texttt{ here}}.\hypertarget{md_pixel_shop_vendor_omnipay_stripe__r_e_a_d_m_e_autotoc_md204}{}\doxysection{Test Mode}\label{md_pixel_shop_vendor_omnipay_stripe__r_e_a_d_m_e_autotoc_md204}
\mbox{\hyperlink{namespace_stripe}{Stripe}} accounts have test-\/mode API keys as well as live-\/mode API keys. These keys can be active at the same time. Data created with test-\/mode credentials will never hit the credit card networks and will never cost anyone money.

Unlike some gateways, there is no test mode endpoint separate to the live mode endpoint, the \mbox{\hyperlink{namespace_stripe}{Stripe}} API endpoint is the same for test and for live.\hypertarget{md_pixel_shop_vendor_omnipay_stripe__r_e_a_d_m_e_autotoc_md205}{}\doxysection{Support}\label{md_pixel_shop_vendor_omnipay_stripe__r_e_a_d_m_e_autotoc_md205}
If you are having general issues with Omnipay, we suggest posting on \href{http://stackoverflow.com/}{\texttt{ Stack Overflow}}. Be sure to add the \href{http://stackoverflow.com/questions/tagged/omnipay}{\texttt{ omnipay tag}} so it can be easily found.

If you want to keep up to date with release announcements, discuss ideas for the project, or ask more detailed questions, there is also a \href{https://groups.google.com/forum/\#!forum/omnipay}{\texttt{ mailing list}} which you can subscribe to.

If you believe you have found a bug, please report it using the \href{https://github.com/thephpleague/omnipay-stripe/issues}{\texttt{ Git\+Hub issue tracker}}, or better yet, fork the library and submit a pull request. 